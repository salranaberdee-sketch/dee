# เอกสารสิทธิ์การใช้งานระบบทัวนาเมนต์

## ภาพรวม

ระบบทัวนาเมนต์แบ่งสิทธิ์การใช้งานตาม 3 บทบาท: Admin, Coach, และ Athlete

---

## Role Matrix

| ฟังก์ชัน | Admin | Coach | Athlete |
|----------|-------|-------|---------|
| ดูทัวนาเมนต์ทั้งหมด | ✅ | ✅ | ✅ |
| สร้างทัวนาเมนต์ | ✅ | ✅ | ❌ |
| แก้ไขทัวนาเมนต์ | ✅ ทั้งหมด | ✅ เฉพาะที่สร้างเอง | ❌ |
| ลบทัวนาเมนต์ | ✅ ทั้งหมด | ✅ เฉพาะที่สร้างเอง | ❌ |
| เพิ่มนักกีฬาเข้าแข่งขัน | ✅ ทุกชมรม | ✅ เฉพาะชมรมตัวเอง | ❌ |
| ลบนักกีฬาออกจากรายการ | ✅ ทุกคน | ✅ เฉพาะนักกีฬาในชมรม | ❌ |
| บันทึกผลการแข่งขัน | ✅ ทุกคน | ✅ เฉพาะนักกีฬาในชมรม | ❌ |
| แก้ไขผลการแข่งขัน | ✅ ทุกคน | ✅ เฉพาะนักกีฬาในชมรม | ❌ |
| เพิ่มรางวัล | ✅ ทุกคน | ✅ เฉพาะนักกีฬาในชมรม | ❌ |
| ลบรางวัล | ✅ ทุกคน | ✅ เฉพาะนักกีฬาในชมรม | ❌ |
| ดูประวัติการแข่งขัน | ✅ ทุกคน | ✅ นักกีฬาในชมรม | ✅ เฉพาะตัวเอง |

---

## รายละเอียดแต่ละ Role

### 1. Admin (ผู้ดูแลระบบ)

**สิทธิ์:**
- เข้าถึงและจัดการข้อมูลทั้งหมดในระบบ
- สร้าง แก้ไข ลบ ทัวนาเมนต์ได้ทุกรายการ
- เพิ่มนักกีฬาจากทุกชมรมเข้าแข่งขัน
- บันทึกผลการแข่งขันและรางวัลได้ทุกคน

**ตัวอย่างการใช้งาน:**
```
1. Login ด้วย admin@test.com / password123
2. ไปที่เมนู "ทัวนาเมนต์"
3. คลิก "เพิ่มทัวนาเมนต์" เพื่อสร้างรายการใหม่
4. คลิก "รายละเอียด" เพื่อจัดการผู้เข้าแข่งขัน
5. เพิ่มนักกีฬา บันทึกผล และรางวัล
```

---

### 2. Coach (โค้ช)

**สิทธิ์:**
- สร้างทัวนาเมนต์ได้
- แก้ไข/ลบได้เฉพาะทัวนาเมนต์ที่ตัวเองสร้าง
- เพิ่มได้เฉพาะนักกีฬาในชมรมตัวเอง
- บันทึกผล/รางวัลได้เฉพาะนักกีฬาในสังกัด

**ข้อจำกัด:**
- ไม่สามารถเพิ่มนักกีฬาจากชมรมอื่น
- ไม่สามารถแก้ไขผลการแข่งขันของนักกีฬาชมรมอื่น

**ตัวอย่างการใช้งาน:**
```
1. Login ด้วย coach@test.com / password123
2. ไปที่เมนู "ทัวนาเมนต์"
3. คลิก "เพิ่มทัวนาเมนต์" เพื่อสร้างรายการ
4. ในรายละเอียด จะเห็นเฉพาะนักกีฬาในชมรมตัวเอง
5. เพิ่มนักกีฬา บันทึกผล และรางวัลได้เฉพาะนักกีฬาในสังกัด
```

---

### 3. Athlete (นักกีฬา)

**สิทธิ์:**
- ดูรายการทัวนาเมนต์ทั้งหมด
- ดูรายชื่อผู้เข้าแข่งขัน
- ดูประวัติการแข่งขันของตัวเองในหน้า Profile

**ข้อจำกัด:**
- ไม่สามารถสร้าง แก้ไข หรือลบทัวนาเมนต์
- ไม่สามารถเพิ่มตัวเองหรือคนอื่นเข้าแข่งขัน
- ไม่สามารถบันทึกผลหรือรางวัล

**ตัวอย่างการใช้งาน:**
```
1. Login ด้วย athlete@test.com / password123
2. ไปที่เมนู "ทัวนาเมนต์" เพื่อดูรายการ
3. คลิก "รายละเอียด" เพื่อดูผู้เข้าแข่งขันและผล
4. ไปที่ "โปรไฟล์" เพื่อดูประวัติการแข่งขันของตัวเอง
```

---

## Workflow การใช้งาน

```
┌─────────────────────────────────────────────────────────┐
│  1. สร้างทัวนาเมนต์ (Admin/Coach)                        │
│     - กรอกชื่อ, ประเภทกีฬา, วันที่, สถานที่              │
│     - ตั้งสถานะ: กำลังจะมาถึง/กำลังแข่งขัน/เสร็จสิ้น      │
├─────────────────────────────────────────────────────────┤
│  2. เพิ่มนักกีฬาเข้าแข่งขัน (Admin/Coach)                │
│     - เลือกนักกีฬา (Coach เห็นเฉพาะชมรมตัวเอง)          │
│     - ระบุรุ่น/ประเภท และรุ่นน้ำหนัก                     │
├─────────────────────────────────────────────────────────┤
│  3. บันทึกผลการแข่งขัน (Admin/Coach)                     │
│     - เลือกนักกีฬา, วันแข่ง, คู่แข่ง                     │
│     - บันทึกผล: ชนะ/แพ้/เสมอ/รอผล                       │
│     - ระบุคะแนน (ถ้ามี)                                 │
├─────────────────────────────────────────────────────────┤
│  4. บันทึกรางวัล (Admin/Coach)                          │
│     - เลือกนักกีฬา                                      │
│     - เลือกประเภท: ทอง/เงิน/ทองแดง/ประกาศนียบัตร/พิเศษ   │
│     - ระบุชื่อรางวัลและวันที่ได้รับ                      │
├─────────────────────────────────────────────────────────┤
│  5. ดูประวัติ (ทุก Role)                                │
│     - Admin/Coach: ดูในรายละเอียดทัวนาเมนต์              │
│     - Athlete: ดูในหน้า Profile                         │
└─────────────────────────────────────────────────────────┘
```

---

## RLS Policies (Row Level Security)

ระบบใช้ Supabase RLS เพื่อควบคุมการเข้าถึงข้อมูลในระดับ Database:

### tournaments
- Admin: SELECT/INSERT/UPDATE/DELETE ทั้งหมด
- Coach/Athlete: SELECT ทั้งหมด

### tournament_participants
- Admin: SELECT/INSERT/UPDATE/DELETE ทั้งหมด
- Coach: SELECT ทั้งหมด, INSERT/UPDATE/DELETE เฉพาะ club_id ตัวเอง

### tournament_matches
- Admin: SELECT/INSERT/UPDATE/DELETE ทั้งหมด
- Coach: SELECT ทั้งหมด, INSERT/UPDATE/DELETE เฉพาะนักกีฬาในชมรม

### tournament_awards
- Admin: SELECT/INSERT/UPDATE/DELETE ทั้งหมด
- Coach: SELECT ทั้งหมด, INSERT/DELETE เฉพาะนักกีฬาในชมรม

---

## Demo Accounts

| Role | Email | Password |
|------|-------|----------|
| Admin | admin@test.com | password123 |
| Coach | coach@test.com | password123 |
| Athlete | athlete@test.com | password123 |

**หมายเหตุ:** ห้ามลบหรือแก้ไข Demo Accounts เหล่านี้
